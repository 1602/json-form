<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>JSON Form web-component demo</title>
        <!--link rel="stylesheet" href="solarized-dark.css"></link-->
        <!--script src="https://unpkg.com/json-viewer-custom-element"></script-->

        <script>
            const q = document.querySelector.bind(document);

            window.addEventListener('load', () => {
                const form = q('json-form');
                const viewer = q('json-viewer');
                if (form && viewer) {
                    connect(form, viewer);
                }
            });

            function connect(form, viewer) {
                form.addEventListener('change', () =>
                    viewer.setAttribute('value', form.getAttribute('value'))
                );
            }

            /*
            customElements.define('code-sample', class extends HTMLElement {
                static get observedAttributes() {
                    return ['code'];
                }
                constructor() {
                    super();
                    const appRoot = document.createElement('pre');
                    const shadowRoot = this.attachShadow({ mode: 'open' });
                    const styles = document.createElement('link');
                    styles.setAttribute('rel', 'stylesheet');
                    styles.setAttribute('href', 'solarized-dark.css');
                    shadowRoot.appendChild(styles);
                    shadowRoot.appendChild(appRoot);
                    this.appRoot = appRoot;
                }

                connectedCallback() {
                    this.appRoot.textContent = this.getAttribute('code');
                    hljs.highlightBlock(this.appRoot);
                }

                attributeChangedCallback(name, oldValue, newValue) {
                    switch (name) {
                        case 'code':
                            if (oldValue !== newValue) {
                                this.appRoot.textContent = this.getAttribute('code');
                                hljs.highlightBlock(this.appRoot);
                            }
                    }
                }
            });
            */

        </script>
<script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // https://github.com/rafrex/spa-github-pages
      // Copyright (c) 2016 Rafael Pedicini, licensed under the MIT License
      // ----------------------------------------------------------------------
      // This script checks to see if a redirect is present in the query string
      // and converts it back into the correct url and adds it to the
      // browser's history using window.history.replaceState(...),
      // which won't cause the browser to attempt to load the new url.
      // When the single page app is loaded further down in this file,
      // the correct url will be waiting in the browser's history for
      // the single page app to route accordingly.
      (function(l) {
        if (l.search) {
          var q = {};
          l.search.slice(1).split('&').forEach(function(v) {
            var a = v.split('=');
            q[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
          });
          if (q.p !== undefined) {
            window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + (q.p || '') +
              (q.q ? ('?' + q.q) : '') +
              l.hash
            );
          }
        }
      }(window.location))
    </script>
        <style>
            json-viewer { margin: 50px; display: block; }
            json-form { margin: 50px; display: block; }
        </style>
    </head>
    <body>
        <!--
        <json-form
                schema='{"type":"string","title":"Greeting","maxLength":5,"description":"Enter any greeting"}'
          value='"hello"'
        ></json-form>

        <json-viewer
            value='"hello"'
        ></json-viewer>
        -->
    </body>
</html>
